<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Vramework.dev</title>
  <meta name="description" content="An introduction to Vramework.dev">
  <meta name="author" content="Yasser Fadl">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Core reveal.js styles -->
  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <link rel="stylesheet" href="dist/theme/moon.css" id="theme">
  <link rel="stylesheet" href="dist/theme/custom.css" id="theme">

  <!-- Code syntax highlighting (optional) -->
  <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>

  <div class="reveal">
    <div class="slides">

      <!-- Title Slide -->
      <section>
        <a href="https://vramework.dev">
          <img src="https://vramework.dev/img/vramework.png" alt="Vramework.dev logo"
            style="height: 180px; margin: 0 auto 4rem auto; background: transparent;">
        </a>
        <h2 style="margin-bottom: 0;">Vramework</h2>
        <h3>The Framework to Unite Them All</h3>
        <p><small>Created by <a href="http://github.com/yasserf">Yasser Fadl</a></small></p>
      </section>

      <!-- Node.js Ecosystem Growth -->
      <section>
        <h2>The Node.js Ecosystem Has Grown!</h2>
      </section>

      <!-- Comparison Slide (Approaches) -->
      <section class="comparison" data-auto-animate data-auto-animate-easing="cubic-bezier(0.770, 0.000, 0.175, 1.000)">
        <h3>Popular Approaches Today*</h3>
        <div class="comparison-grid">
          <img class="compare-one compare-icon" data-id="icon-aws" src="/assets/aws.svg" alt="AWS (Serverless)">
          <img class="compare-one compare-icon" data-id="icon-cloudflare" src="/assets/cloudflare.svg"
            alt="Cloudflare (Workers)">
          <img class="compare-one compare-icon" data-id="icon-express" src="/assets/express.svg"
            alt="Express (Framework)">
          <img class="compare-one compare-icon" data-id="icon-uws" src="/assets/uws.png" alt="uWebSockets (Server)">
          <img class="compare-one compare-icon" data-id="icon-loopback" src="/assets/loopback.png"
          alt="LoopBack (Framework)">
          <img class="compare-one compare-icon" data-id="icon-encore" src="/assets/encore.png"
          alt="Encore (Serverless)">
          <img class="compare-one compare-icon" data-id="icon-fastify" src="/assets/nextjs.png"
            alt="Next.js (Fullstack)">
            <img class="compare-one compare-icon" data-id="icon-tanstack" src="/assets/tanstack.png"
            alt="TanStack (Fullstack Tools)">
          <img class="compare-one compare-icon" data-id="icon-nestjs" src="/assets/nestjs.png" alt="NestJS (Framework)">
          <img class="compare-one compare-icon" data-id="icon-azure" src="/assets/azure.svg" alt="Azure (Serverless)">
          <img class="compare-one compare-icon" data-id="icon-fastify" src="/assets/fastify.svg"
          alt="Fastify (Framework)">
          <img class="compare-one compare-icon" data-id="icon-websocket" src="/assets/websocket.png" alt="WebSockets">

        </div>
        <small>* and more added daily...</small>
      </section>

      <!-- High-Level Comparison Table -->
      <section data-auto-animate>
        <h3>A High-Level Comparison</h3>
        <p style="font-size:0.9em;">(Selected features across on a standard project)</p>
        <table>
          <thead>
            <tr>
              <th></th>
              <th><img data-id="icon-aws" class="table-icon" src="/assets/aws.svg" alt="AWS"></th>
              <th><img data-id="icon-cloudflare" class="table-icon" src="/assets/cloudflare.svg" alt="Cloudflare"></th>
              <th><img data-id="icon-express" class="table-icon" src="/assets/express.svg" alt="Express"></th>
              <th><img data-id="icon-uws" class="table-icon" src="/assets/uws.png" alt="uWebSockets"></th>
              <th><img data-id="icon-loopback" class="table-icon" src="/assets/loopback.png" alt="LoopBack"></th>
              <th><img data-id="icon-encore" class="table-icon" src="/assets/encore.png" alt="Encore"></th>
              <th><img data-id="icon-nextjs" class="table-icon" src="/assets/nextjs.png" alt="Next.js"></th>
              <th><img data-id="icon-tanstack" lass="table-icon" src="/assets/tanstack.png" alt="TanStack"></th>
              <th><img data-id="icon-nestjs" class="table-icon" src="/assets/nestjs.png" alt="NestJS"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Serverless</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚úÖ</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
            </tr>
            <tr>
              <td>Functions</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
            </tr>
            <tr>
              <td>Services</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚úÖ</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚úÖ</td>
            </tr>
            <tr>
              <td>Full Stack</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>
              <td>‚ùå</td>
            </tr>
            <tr>
              <td>Simple</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>
              <td>‚úÖ</td>

              <td>‚ùå</td>

              <td>‚úÖ</td>

              <td>‚ùå</td>
              <td>‚ùå</td>
              <td>‚ùå</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section data-auto-animate>
        <h2>Common Pain Points</h2>
        <h4>Have you heard or thought of any of these before?</h4>
        <small>Feel free to replace X with Y</small>
      </section>

      <section data-auto-animate>
        <blockquote>‚ÄúAWS is way too expensive, I wish we could save money by running it on Cloudflare instead‚Äù
        </blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWhy is our docker job processor so under utilised?‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWe just landed a huge new client! Just wish they weren't using Azure üò®.‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWe want to start offering our cloud product to on-premise / enterprise customers.‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWhy are we now doing our database queries directly from React code?‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúARGGGH, what is all this boilerplate code!‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWhy is it so hard to deploy our WebSockets via serverless?‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWhy is my function startup time so slow!‚Äù</blockquote>
      </section>
      <section data-auto-animate>
        <blockquote>‚ÄúWhat about the üåç?‚Äù</blockquote>
      </section>

      <section>
        <h2>The Problem</h2>
        <h1>Costs and Lock-in</h1>
      </section>

      <!-- Introduce Typed Functions / Vramework -->
      <section>
        <h2>My Solution Is...</h2>
        <h1 class="fragment">Typed Functions!</h1>
        <h3 class="fragment">a.k.a. Vramework</h3>
      </section>

      <!-- Why Typed Functions / Vramework? -->
      <section>
        <h2>Why Typed Functions?</h2>
        <ol>
          <li>üß© Modular (Functions are individual units)</li>
          <li>üß≥ Portable (AWS, Cloudflare, Express, ...)</li>
          <li>‚òÅÔ∏è Serverless design (without sacrificing speed)</li>
          <li>üß™ Simple to test</li>
          <li>‚ù§Ô∏è TypeScript</li>
        </ol>
      </section>

      <!-- Capabilities Slide -->
      <section data-auto-animate>
        <h2>Key Features</h2>
        <ul>
          <li>Protocol Agnostic</li>
          <li>Services & Auth built-in</li>
          <li>HTTP / Scheduled Tasks / Websockets</li>
          <li>Type-safe (From DB to UI)</li>
          <li>Runtime schema validation</li>
          <li>OpenAPI docs, typed plugins, typed fetch</li>
          <li>and more...</li>
        </ul>
      </section>

      <!-- Code Intro Slide -->
      <section>
        <h2>Code Snippets</h2>
        <p>It's a developer framework after all! Let‚Äôs see some examples.</p>
      </section>

      <!-- A Vramework Function -->
      <section>
        <h2>A Vramework Function</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">
          Typed inputs & outputs ensure type-safety and fewer runtime errors.
        </p>
        <pre><code class="javascript" style="font-size: 16px;" data-line-numbers="|4|5|6|7-11|12">import type { Talk, Vote } from './types'

export const voteOnTalk: APIFunction&lt;
  Pick&lt;Talk, 'talkId'> & { vote: Vote }, // Input
  { message: string }                   // Output
&gt; = async (services, data, userSession) => {
  try {
    await services.talks.addVote(data.talkId, userSession.userId, data.vote)
  } catch {
    throw new AlreadyVoted()
  }
  return { message: "Thank you for the feedback!" }
};
      </code></pre>
      </section>

      <!-- HTTP Example -->
      <section>
        <h2>HTTP</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">Wire a function to an HTTP route with auth & permissions</p>
        <pre><code class="javascript" style="font-size:16px;" data-line-numbers="|1,15|2-3|4|5-9|10-14|17-19">addRoute({
  method: 'post',
  route: '/talk/:talkId/vote',
  func: voteOnTalk,
  permissions: {
    isTalkMember: [isTalkMember, isNotPresenter],
    isAdmin
  },
  auth: true,
  docs: {
    errors: [AlreadyVotedError],
    description: 'Vote on a talk',
    tags: ['talk']
  }
})

addErrors([
  [AlreadyVoted, { status: 409, message: 'User Already Voted' }],
])
      </code></pre>
      </section>

      <!-- Cron Example -->
      <section>
        <h2>CronJobs</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">Register scheduled tasks directly in your codebase</p>
        <pre><code class="javascript" style="font-size:16px;" data-line-numbers="|1-6|8,12|9-11">const sendNewsletter: APIFunctionSessionless&lt;void, void&gt; = async (
  { database, email: emailService }
) => {
  const emails = await database.getUserEmails()
  await emailService.sendNewsletter(emails)
}

addScheduledTask({
  name: 'sendNewsletter',
  schedule: '*/1 * * * *', // every minute
  func: sendNewsletter
})
      </code></pre>
      </section>


      <!-- Services Example -->
      <section>
        <h2>Services in Vramework</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">Define singleton and session-based services</p>
        <pre><code class="javascript" style="font-size: 16px;" data-line-numbers="|1-16|18-27">const createSingletonServices: CreateSingletonServices&lt;
  Config,
  SingletonServices
&gt; = async (config) => {
  const jwt = new JoseJWTService&lt;UserSession&gt;(getJWTKeys, logger)
  const httpSessionService = new VrameworkHTTPSessionService&lt;UserSession&gt;(jwt, {
    cookieNames: ['session'],
    getSessionForCookieValue: async (cookieValue: string) => {
      return await jwt.decodeSession(cookieValue)
    }
  })
  return {
    config, logger, jwt, httpSessionService,
    talks: new TalksService()
  }
}
    
const createSessionServices: CreateSessionServices&lt;
  SingletonServices,
  Services,
  UserSession
&gt; = async (services, { http }, session) => {
  const temporaryFileService = new TemporaryFileService()
  return {
    temporaryFileService
  }
}
            </code></pre>
      </section>


      <!-- How Vramework Works (TypeScript compiler) -->
      <section>
        <h2>How It Works Under the Hood</h2>
        <p style="font-size:0.95em;">
          <strong>By leveraging the TypeScript compiler</strong>
        </p>
        <div class="layer vramework-inner-workings">
          <div class="fragment layer function-layer">
            <div class="services">
              <div class="service">talk</div>
              <div class="service">httpSession</div>
              <div class="service">jwt</div>
            </div>
            <div class="functions">
              <div class="function">addTalk</div>
              <div class="function">sendNewsletter</div>
              <div class="function">getTalks</div>
            </div>
            <div class="wiring">
              <div class="wire">HTTP</div>
              <div class="wire">Cron Jobs</div>
              <div class="wire">WebSockets</div>
            </div>
          </div>
          <div class="fragment layer cli-layer">
            <div class="file-icon">
              <img src="/assets/typescript-file.png" alt="Typescript File">
              <span>HTTP</span>
            </div>
            <div class="file-icon">
              <img src="/assets/json-file.png" alt="JSON File">
              <span>Schemas</span>
            </div>
            <div class="file-icon">
              <img src="/assets/typescript-file.png" alt="Typescript File">
              <span>Schedules</span>
            </div>
            <div class="file-icon">
              <img src="/assets/typescript-file.png" alt="Typescript File">
              <span>Channels</span>
            </div>
            <div class="file-icon">
              <img src="/assets/typescript-file.png" alt="Typescript File">
              <span>NextJS</span>
            </div>
            <div class="file-icon">
              <img src="/assets/typescript-file.png" alt="Typescript File">
              <span>TS Fetch</span>
            </div>
            <div class="file-icon">
              <img src="/assets/typescript-file.png" alt="Typescript File">
              <span>TS WS</span>
            </div>
            <div class="file-icon">
              <img src="/assets/json-file.png" alt="JSON File">
              <span>OpenAPI</span>
            </div>
          </div>
          <div class="top-layer">
            <div class="fragment layer core-layer">
              <div class="file-icon">
                <img src="/assets/typescript-file.png" alt="Typescript File">
                <span>HTTP</span>
              </div>
              <div class="file-icon">
                <img src="/assets/typescript-file.png" alt="Typescript File">
                <span>Channel</span>
              </div>
              <div class="file-icon">
                <img src="/assets/typescript-file.png" alt="Typescript File">
                <span>Schedule</span>
              </div>
              <div class="file-icon">
                <img src="/assets/typescript-file.png" alt="Typescript File">
                <span>Auth</span>
              </div>
              <div class="file-icon">
                <img src="/assets/typescript-file.png" alt="Typescript File">
                <span>etc...</span>
              </div>
            </div>
            <div class="fragment layer plugin-layer">
              <img src="/assets/aws.svg" alt="AWS">
              <img src="/assets/cloudflare.svg" alt="Cloudflare">
              <img src="/assets/express.svg" alt="Express">
              <img src="/assets/uws.png" alt="uWebSockets">
              <img src="/assets/nextjs.png" alt="Next.js">
              <img src="/assets/fastify.svg" alt="Fastify">
              <img src="/assets/websocket.png" alt="Websocket">
            </div>
          </div>
        </div>
      </section>

      <!-- Services Example -->
      <section>
        <h2>The CLI</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">npx @vramework/cli</p>
        <pre><code class="json" style="font-size: 16px;">{
  // The project config file
  "tsconfig": "./tsconfig.json",
  // Where inspector should look for functions & services
  "routeDirectories": ["packages/functions/src"],
  // Where all the generated files go
  "outDir": "packages/functions/.vramework"
}</code></pre>
        <small>vramework.config.json</small>
      </section>

      <!-- Services Example -->
      <section>
        <h2>Deploying Via Express</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">How would we deploy this via express?</p>
        <pre><code class="javascript" style="font-size: 16px;" data-line-numbers="|1|2-4|5-7|8-11">import '../.vramework/vramework-bootstrap.gen'
// Create Config and Services         
const config = await getConfig()
const singletonServices = await createSingletonServices(config)
// Create a scheduler for CronJobs
const scheduler = new VrameworkTaskScheduler(singletonServices)
scheduler.startAll()
// Create an Express app
const app = new Express()
app.use(vrameworkMiddleware(this.singletonServices, createSessionServices))
app.listen(config.port, config.hostname)
            </code></pre>
      </section>

      <!-- Services Example -->
      <section>
        <h2>Deploying Via AWS</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">How would we use this via AWS?</p>
        <pre><code class="javascript" style="font-size: 16px;" data-line-numbers="|1|2-10|11-15|16-23">import '../.vramework/vramework-bootstrap.gen'
// Create Config and Services once on load
let singletonServices
const coldStart = async () => {
  if (!singletonServices) {
    const config = await getConfig()
    const singletonServices = await createSingletonServices(config)
    return singletonServices
  }
}
// Respond to HTTP
export const handler = async (event: APIGatewayProxyEvent) => {
  const singletonServices = await coldStart()
  return await corslessHTTP(event, singletonServices, createSessionServices)
}
// Run a cron job
export const expireTodos: ScheduledHandler = async (event) => {
  const singletonServices = await coldStart()
  await runScheduledTask({
    name: 'expireTodos',
    singletonServices,
  })
}
                  </code></pre>
      </section>

      <!-- Demo Slide -->
      <section>
        <h2>Demo Time üöÄ</h2>
        <p>(Quick demonstration of Vramework in action.)</p>
      </section>

      <!-- New Caveats Slide -->
      <section>
        <h2>Limitations & Caveats</h2>
        <h3>Vramework is a function repository, not a server!</h3>
        <ul>
          <li>Built primarily to plug into <strong>servers</strong></li>
          <li>Currently <strong>JSON and primitives</strong> input/output.</li>
          <li>Still it 0.x stage* (due to cli refactor)</li>
        </ul>
      </section>

      <!-- Roadmap -->
      <section>
        <h2>Roadmap</h2>
        <ol>
          <li>üîé Validate the problem space</li>
          <li>‚ù§Ô∏è Build a community</li>
          <li>ü§ñ AI Tooling</li>
          <li>üí° Smarter Inspector</li>
          <li>üî¨ Microservices</li>
        </ol>
      </section>

      <!-- Recap Slide -->
      <section>
        <h4>In summary...</h4>
        <h3>Vramework = Typed Functions + Minimal Overhead</h3>
        <ul class="fragment">
          <li>Leverages TS Compiler to remove almost all boilerplate</li>
          <li>Handles HTTP, Cron, Auth, and more</li>
          <li>Loads of generated typescript helpers</li>
          <li>Deploy anywhere with full TypeScript coverage</li>
        </ul>
      </section>

      <!-- End / Q&A Slide -->
      <section class="stretch">
        <div style="display: flex; flex-direction: column; gap: 50px; justify-content: center; align-items: center;">
          <div
            style="text-align: center; display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 100px;">
            <div>
              <h1>THE END</h1>
              <p>Q & A</p>
            </div>
            <div style="display: flex; flex-direction: column;">
              <a href="https://qr-creator.com/" target="_blank" style="cursor:default;"><img
                  src="https://qr-api.quel.jp/v1/?size=7&data=https%3A%2F%2Fforms.gle%2FAPJ1PdWHpUVmmcuB9"
                  alt="QR Code" /></a>
              <a href="https://forms.gle/APJ1PdWHpUVmmcuB9">Feedback pweez! üê±</a>
            </div>
          </div>
          <div style="display: flex; flex-direction: row; gap: 20px; font-size: 30px;">
            <a href="https://vramework.dev">
              <img src="https://vramework.dev/img/vramework.png" alt="Vramework.dev logo"
                style="height: 90px; margin: 0 auto 4rem auto; background: transparent;">
            </a>
            <div>
              <a href="https://vramework.dev">https://vramework.dev</a>
              <div href="https://github.com/vramework/vramework">Github + ‚≠êÔ∏è = üéâ</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Last Slide -->
      <section data-background="/assets/last-slide.webp">
      </section>

      <!-- WebSocket (Encore) -->
      <section>
        <h2>Bonus: WebSockets üëÄ</h2>
        <p style="font-size:0.9em; margin-bottom:10px;">
          Sneak peek at how Vramework handles real-time communication without the usual serverless headaches:
        </p>
        <pre><code class="javascript" style="font-size:16px;" data-line-numbers="|1-3|5-7|9-11|13-20|26-28|29-39">const onConnect: ChannelConnection&lt;'hello!'> = async (services, channel) => {
  // On connection (like onOpen)
}

const onDisconnect: ChannelDisconnection = async (services, channel) => {
  // On close
}

const onMessage: ChannelMessage&lt;'hello!', 'hey'> = async (services, channel) => {
  channel.send('hey')
}

export const subscribeToLikes: ChannelMessage&lt;
  { talkId: string; action: 'subscribeToLikes' },
  { action: string; likes: number }
&gt; = async (services, channel, { action, talkId }) => {
  const channelName = services.talks.getChannelName(talkId)
  await services.eventHub.subscribe(channelName, channel.channelId)
  return { action, likes: await services.talks.getLikes(talkId) }
}

addChannel({
  name: 'talks',
  route: '/',
  auth: true,
  onConnect,
  onDisconnect,
  onMessage,
  onMessageRoute: {
    action: {
      subscribeToLikes: {
        func: subscribeToLikes,
        permissions: {
          isTalkMember: [isTalkMember, isNotPresenter],
          isAdmin
        },
      },
    },
  },
})
      </code></pre>
      </section>

    </div>
  </div>

  <!-- Reveal.js scripts -->
  <script src="dist/reveal.js"></script>
  <script src="plugin/zoom/zoom.js"></script>
  <script src="plugin/notes/notes.js"></script>
  <script src="plugin/search/search.js"></script>
  <script src="plugin/markdown/markdown.js"></script>
  <script src="plugin/highlight/highlight.js"></script>
  <script>
    Reveal.configure({ pdfSeparateFragments: false });
    Reveal.initialize({
      controls: true,
      progress: true,
      center: true,
      hash: true,
      // Enable auto-animate globally
      autoAnimate: true,
      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight]
    });
  </script>

</body>

</html>